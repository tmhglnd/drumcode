#N canvas 827 239 734 565 12;
#X obj 59 241 slide~ 20 690;
#X text 154 196 based on fastrampup/down settings in fluid.ampfeature in dc.trigger~, f 15;
#X obj 59 301 atodb~;
#X obj 59 208 abs~;
#X obj 74 399 sah~ 0.5;
#X obj 110 443 change~;
#X text 411 329 small delay to wait for maximum peak after onset detection, f 29;
#X text 79 278 averaged peak in dB;
#X obj 59 344 minmax~;
#X obj 110 472 edge~;
#X text 204 527 specified specifically from cyclone for the offset feature, f 27;
#X msg 197 488 offset \$1;
#X obj 197 427 blocksize~;
#X obj 197 458 - 1;
#X obj 197 399 loadbang;
#X text 278 457 assure last value from signal vector, f 17;
#X obj 74 528 cyclone/snapshot~;
#X obj 300 344 delay~ 2048 64;
#X obj 380 301 ms2samps;
#X obj 419 259 loadmess 2.5;
#X obj 74 561 t b f;
#X obj 59 161 cross~ 700;
#X text 79 90 remove mid-low frequency content for clear peak amplitude reading on the transients, f 23;
#X obj 59 57 inlet~ (signal) audio input from adc~;
#X obj 300 230 inlet~ (trigger) trigger signal input from dc.trigger~;
#X obj 328 123 args -;
#X obj 328 91 loadbang;
#X obj 639 59 cnv 15 283 29 empty empty dc.peak~ 20 13 0 20 #00deb1 #ffffff 0;
#X text 639 99 Measure the peak of an incoming signal for a brief amount of time. The time is specified in milliseconds (default 2.5). The measurement is trigger through a trigger/click on the right inlet. The signal to measure is input on the left inlet. the signal is highpass-filtered to give a clear reading of the transients (default 700 Hz)., f 41;
#X obj 74 642 outlet (bang) trigger output when detected;
#X text 639 215 The input trigger is again output as a bang on the left outlet. On the right outlet the velocity is output, f 43;
#X obj 328 159 route -filter;
#X obj 119 601 outlet (number) measured volume in dB;
#X text 639 278 inspired and based on discussion and post from tremblap/constanza/harker at flucoma forum https://discourse.flucoma.org/t/real-time-onset-detection-example/163/16, f 39;
#X connect 0 0 2 0;
#X connect 2 0 8 0;
#X connect 3 0 0 0;
#X connect 4 0 16 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 8 1 4 0;
#X connect 9 0 16 0;
#X connect 11 0 16 0;
#X connect 12 0 13 0;
#X connect 13 0 11 0;
#X connect 14 0 12 0;
#X connect 16 0 20 0;
#X connect 17 0 4 1;
#X connect 18 0 17 1;
#X connect 19 0 18 0;
#X connect 20 0 29 0;
#X connect 20 1 32 0;
#X connect 21 1 3 0;
#X connect 23 0 21 0;
#X connect 23 1 31 0;
#X connect 24 0 17 0;
#X connect 24 0 8 1;
#X connect 25 0 31 0;
#X connect 26 0 25 0;
#X connect 31 0 21 1;
#X connect 31 1 18 0;
