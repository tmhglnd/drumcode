#N canvas 733 172 450 300 12;
#X obj 59 370 poke~ \$0-circBuf;
#X obj 119 111 sig~ 1;
#X obj 119 219 %~;
#X obj 177 141 array size \$0-circBuf;
#X obj 177 111 loadbang;
#X obj 239 179 * 0.5;
#X obj 201 219 +~;
#X obj 167 281 %~;
#X obj 96 331 poke~ \$0-circBuf;
#X obj 229 281 %~;
#X obj 379 370 delay 256 1 samples;
#X obj 119 141 +=~;
#X obj 379 500 f;
#X msg 287 308 offset \$1;
#X obj 287 250 blocksize~;
#X obj 287 222 loadbang;
#X msg 379 530 startframe \$1 \, bang;
#X obj 59 592 array define \$0-circBuf 44100;
#X f 26;
#X obj 379 592 fluid.bufcompose -source \$0-circBuf -destination \$0-soundFrame -numframes 256 -blocking 1, f 43;
#X obj 559 341 args;
#X obj 229 453 wrap2 0 22050;
#X text 270 402 offset to go back a bit in the time before the onset was detected, f 29;
#X text 336 452 wrap between 0 and buffer size;
#X text 416 499 trigger to copy the sound from the circular buffer to the temporary buf;
#X obj 379 644 outlet;
#X obj 59 58 inlet~;
#X obj 379 281 inlet;
#X text 106 57 1 (signal) capture short piece of incoming signal;
#X text 416 280 2 (trigger) detected trigger from drum.trigger~;
#X msg 559 530 numframes \$1;
#X obj 559 315 loadbang;
#X obj 450 58 cnv 15 283 29 empty empty dc.trigger.frame~ 20 13 0 20 #00deb1 #ffffff 0;
#X text 450 94 Capture a short frame of sound when the trigger is detected. This short frame of sound can be used to analyse for various sound descriptors such as pitch \, loudness \, spectral centroid \, noisiness \, timbre (mfcc) and more., f 41;
#X text 450 193 arguments:;
#X text 450 213 framesize in samples (default = 256 \, min = 8 \, max = 22050);
#X obj 559 403 clip 8 22050;
#X text 429 643 (buffer/array) output the buffer name containing the short sound capture, f 61;
#X obj 287 281 - 1;
#X obj 379 315 t b b;
#X obj 59 630 array define \$0-soundFrame 256;
#X f 29;
#X obj 590 450 array size \$0-soundFrame;
#X obj 229 370 cyclone/snapshot~;
#X obj 559 370 default 256;
#X obj 229 403 - 16;
#X connect 1 0 11 0;
#X connect 2 0 9 0;
#X connect 2 0 0 1;
#X connect 3 0 2 1;
#X connect 3 0 5 0;
#X connect 3 0 7 1;
#X connect 4 0 3 0;
#X connect 5 0 6 1;
#X connect 5 0 9 1;
#X connect 6 0 7 0;
#X connect 7 0 8 1;
#X connect 9 0 41 0;
#X connect 10 0 12 0;
#X connect 11 0 2 0;
#X connect 11 0 6 0;
#X connect 12 0 16 0;
#X connect 13 0 41 0;
#X connect 14 0 37 0;
#X connect 15 0 14 0;
#X connect 16 0 18 0;
#X connect 18 0 24 0;
#X connect 19 0 42 0;
#X connect 20 0 12 1;
#X connect 25 0 0 0;
#X connect 25 0 8 0;
#X connect 26 0 38 0;
#X connect 29 0 18 0;
#X connect 30 0 19 0;
#X connect 35 0 10 1;
#X connect 35 0 29 0;
#X connect 35 0 40 0;
#X connect 37 0 13 0;
#X connect 38 0 10 0;
#X connect 38 1 41 0;
#X connect 41 0 43 0;
#X connect 42 0 35 0;
#X connect 43 0 20 0;
