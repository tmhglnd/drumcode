#N canvas 827 239 734 565 12;
#X declare -path drumcode/pd;
#X declare -path cyclone;
#X declare -path else;
#X obj 156 354 timer;
#X obj 59 222 t b b b;
#X text 198 398 if larger than half quantize time trigger 1 for next beat, f 20;
#X obj 156 399 >;
#X floatatom 234 229 5 0 0 0 - - - 12;
#X obj 234 259 !/ 240000;
#X obj 234 371 / 2;
#X obj 234 296 pak f 16;
#X obj 234 323 / 1;
#X obj 159 566 int 0;
#X msg 198 517 1;
#X obj 134 486 t b b;
#X msg 136 517 0;
#X obj 195 486 sel 1 0;
#X obj 383 527 t f f;
#X obj 34 904 zl.reg;
#X obj 159 863 t l l;
#X obj 34 817 buddy;
#X obj 535 659 declare -path drumcode/pd;
#X obj 172 57 inlet (trigger) input a trigger from dc.trigger~ or dc.trigger.velocity~;
#X obj 535 692 declare -path cyclone;
#X obj 536 726 declare -path else;
#X obj 437 179 args -;
#X obj 437 212 route -name;
#X obj 437 107 loadbang;
#X obj 556 188 inlet (number) subdivision quantization for pattern detection (default = 16), f 34;
#N canvas 733 172 450 300 fill-array-0 0;
#X obj 594 573 uzi;
#X msg 596 601 0;
#X obj 594 629 zl.group;
#X text 632 601 init with empty array;
#X obj 434 537 inlet;
#X obj 316 658 outlet;
#X connect 0 0 1 0;
#X connect 0 1 2 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 4 0 0 0;
#X restore 394 562 pd fill-array-0;
#X obj 170 910 outlet (list) rolling detected quantized pattern;
#X obj 34 943 outlet (list) detected quantized pattern every bar;
#N canvas 733 172 450 300 join-replace 0;
#X obj 79 200 zl.slice 16;
#X obj 79 157 zl.join;
#X text 259 304 set previous to 1 if trigger was detected after the beat, f 18;
#X obj 179 261 zl.reg;
#X obj 179 305 replace 1 1;
#X obj 79 350 zl.rev;
#X obj 79 71 inlet;
#X obj 237 71 inlet;
#X obj 297 71 inlet;
#X obj 179 71 inlet;
#X obj 79 384 outlet;
#X connect 0 0 3 1;
#X connect 0 0 5 0;
#X connect 0 0 1 1 48.................J....X9+++uB....l++++q6+++eE....59+++WA...vv++++;
#X connect 1 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 1 1 48.................M....P9+++eC....j++++G0+++ur++++Q8+++K6+++uV++++;
#X connect 5 0 10 0;
#X connect 6 0 1 0;
#X connect 7 0 0 0;
#X connect 8 0 0 1;
#X connect 9 0 3 0;
#X restore 159 607 pd join-replace;
#X obj 255 141 t f f;
#X obj 572 248 unjoin 2;
#X obj 59 179 dc.metronome 16;
#X obj 255 110 r \$0-quant;
#X obj 556 334 s \$0-quant;
#X obj 588 306 s \$0-len;
#X obj 383 486 r \$0-len;
#X text 491 391 get BPM from global or named transport, f 18;
#X text 253 485 set step to 1 if trigger detected before the next hit, f 17;
#X obj 367 287 s \$0-name;
#X obj 57 626 r \$0-name;
#X obj 456 248 prepend -name;
#X obj 34 849 t b;
#X obj 34 760 delay;
#X obj 193 731 blocksize~;
#X obj 193 699 loadbang;
#X obj 193 760 samps2ms;
#X text 280 730 short delay to compensate for clicktrack audio latency output, f 19;
#X obj 34 699 % 16;
#X obj 34 731 sel 0;
#X obj 34 659 dc.metronome 16;
#X obj 34 592 r \$0-quant;
#X obj 88 699 r \$0-len;
#X obj 640 236 inlet (number) report interval and list output length (default = 16), f 29;
#X obj 419 392 value;
#X msg 500 141 -name dc-transport;
#X obj 437 141 t b b;
#X msg 437 363 symbol \$1-bpm;
#X obj 437 334 prepend list;
#X obj 172 323 t b b;
#X obj 419 421 s \$0-bpm;
#X obj 234 197 r \$0-bpm;
#X connect 0 0 3 0;
#X connect 1 0 17 1;
#X connect 1 1 11 0;
#X connect 1 2 0 0;
#X connect 3 0 13 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 6 0 3 1;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 9 0 29 0;
#X connect 10 0 9 1;
#X connect 11 0 12 0;
#X connect 11 1 9 0;
#X connect 12 0 9 1;
#X connect 13 0 10 0;
#X connect 13 1 29 1;
#X connect 14 0 29 3;
#X connect 14 1 26 0;
#X connect 15 0 28 0;
#X connect 16 0 15 1;
#X connect 16 1 27 0;
#X connect 17 0 42 0;
#X connect 19 0 59 0;
#X connect 22 0 23 0;
#X connect 23 0 58 0;
#X connect 23 0 41 0;
#X connect 23 1 31 0;
#X connect 24 0 56 0;
#X connect 25 0 34 0;
#X connect 26 0 29 2;
#X connect 29 0 16 0;
#X connect 30 0 32 0;
#X connect 30 1 7 1;
#X connect 31 0 34 0;
#X connect 31 1 35 0;
#X connect 32 0 1 0;
#X connect 33 0 30 0;
#X connect 36 0 14 0;
#X connect 40 0 50 0;
#X connect 41 0 39 0;
#X connect 41 0 32 0;
#X connect 42 0 15 0;
#X connect 43 0 17 0;
#X connect 44 0 46 0;
#X connect 45 0 44 0;
#X connect 46 0 43 1;
#X connect 48 0 49 0;
#X connect 49 0 43 0;
#X connect 50 1 48 0;
#X connect 51 0 50 0;
#X connect 52 0 48 1;
#X connect 53 0 35 0;
#X connect 54 0 60 0;
#X connect 55 0 23 0;
#X connect 56 0 22 0;
#X connect 56 1 55 0;
#X connect 57 0 54 1;
#X connect 58 0 57 0;
#X connect 59 0 0 1;
#X connect 59 1 54 0;
#X connect 61 0 4 0;
